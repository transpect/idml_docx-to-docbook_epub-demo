<?xml version="1.0" encoding="UTF-8"?><html xmlns:p="http://www.w3.org/ns/xproc" xmlns:html="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" type="text/css" href="transpectdoc.css" /><link rel="stylesheet" type="text/css" href="highlight/styles/default.css" /><script src="jquery.js"></script><script src="highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript" src="transpectdoc.js"></script><title>transpect:file-uri – transpectdoc</title></head><body><div id="transpectdoc"><div id="transpect_file-uri" class="id-container"><div id="nav" class="macroblock"><h1>transpect-demo</h1><ul class="nav"><li><p class="toggle level1" id="nav_frontend"><a class="fold pointer">Frontend Pipelines</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_trdemo_main"><a href="trdemo_main.html">trdemo:main</a></p></li><li><p class="nav" id="nav_transpectdoc"><a href="transpectdoc.html">transpectdoc <span title="anonymous – this step has no type">Ⓐ</span></a></p></li></ul></li><li><p class="toggle level1" id="nav_typedSteps"><a class="fold pointer">Step Declarations</a> <span class="count">(74)</span></p><ul><li><p class="toggle level2" id="nav_namespaceSteps_css"><a class="fold pointer">css:…</a> <span class="count">(3)</span></p><ul><li><p class="nav" id="nav_css_generate"><a href="css_generate.html">css:generate</a></p></li><li><p class="toggle level3"><a class="fold pointer">css.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_css_parse"><a href="css_parse.html">css:parse</a></p></li><li><p class="nav" id="nav_css_expand"><a href="css_expand.html">css:expand</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_cx"><a class="fold pointer">cx:…</a> <span class="count">(3)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">library-1.0.xpl (library)</a> <span class="count">(3)</span></p><ul><li><p class="nav" id="nav_cx_eval"><a href="cx_eval.html">cx:eval</a></p></li><li><p class="nav" id="nav_cx_message"><a href="cx_message.html">cx:message</a></p></li><li><p class="nav" id="nav_cx_zip"><a href="cx_zip.html">cx:zip</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_cxf"><a class="fold pointer">cxf:…</a> <span class="count">(4)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">library-1.0.xpl (library)</a> <span class="count">(4)</span></p><ul><li><p class="nav" id="nav_cxf_copy"><a href="cxf_copy.html">cxf:copy</a></p></li><li><p class="nav" id="nav_cxf_delete"><a href="cxf_delete.html">cxf:delete</a></p></li><li><p class="nav" id="nav_cxf_info"><a href="cxf_info.html">cxf:info</a></p></li><li><p class="nav" id="nav_cxf_mkdir"><a href="cxf_mkdir.html">cxf:mkdir</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_docx2hub"><a class="fold pointer">docx2hub:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_docx2hub_convert"><a href="docx2hub_convert.html">docx2hub:convert</a></p></li><li><p class="nav" id="nav_docx2hub_single-tree"><a href="docx2hub_single-tree.html">docx2hub:single-tree</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_epub"><a class="fold pointer">epub:…</a> <span class="count">(6)</span></p><ul><li><p class="nav" id="nav_epub_convert"><a href="epub_convert.html">epub:convert</a></p></li><li><p class="nav" id="nav_epub_create-ocf"><a href="epub_create-ocf.html">epub:create-ocf</a></p></li><li><p class="nav" id="nav_epub_create-ops"><a href="epub_create-ops.html">epub:create-ops</a></p></li><li><p class="nav" id="nav_epub_html-splitter"><a href="epub_html-splitter.html">epub:html-splitter</a></p></li><li><p class="nav" id="nav_epub_create-opf"><a href="epub_create-opf.html">epub:create-opf</a></p></li><li><p class="nav" id="nav_epub_zip-package"><a href="epub_zip-package.html">epub:zip-package</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_hub2dbk"><a class="fold pointer">hub2dbk:…</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_hub2dbk_convert"><a href="hub2dbk_convert.html">hub2dbk:convert</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_hub2htm"><a class="fold pointer">hub2htm:…</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_hub2htm_convert"><a href="hub2htm_convert.html">hub2htm:convert</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_idml2xml"><a class="fold pointer">idml2xml:…</a> <span class="count">(4)</span></p><ul><li><p class="nav" id="nav_idml2xml_hub"><a href="idml2xml_hub.html">idml2xml:hub</a></p></li><li><p class="nav" id="nav_idml2xml_single-doc"><a href="idml2xml_single-doc.html">idml2xml:single-doc</a></p></li><li><p class="nav" id="nav_idml2xml_single2tagged"><a href="idml2xml_single2tagged.html">idml2xml:single2tagged</a></p></li><li><p class="nav" id="nav_idml2xml_tagged2hub"><a href="idml2xml_tagged2hub.html">idml2xml:tagged2hub</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_letex"><a class="fold pointer">letex:…</a> <span class="count">(11)</span></p><ul><li><p class="nav" id="nav_letex_xslt-mode"><a href="letex_xslt-mode.html">letex:xslt-mode</a></p></li><li><p class="nav" id="nav_letex_prepend-xml-model"><a href="letex_prepend-xml-model.html">letex:prepend-xml-model</a></p></li><li><p class="nav" id="nav_letex_validate-with-rng-PI"><a href="letex_validate-with-rng-PI.html">letex:validate-with-rng-PI</a></p></li><li><p class="nav" id="nav_letex_epubcheck"><a href="letex_epubcheck.html">letex:epubcheck</a></p></li><li><p class="toggle level3"><a class="fold pointer">ltx-lib.xpl (library)</a> <span class="count">(3)</span></p><ul><li><p class="nav" id="nav_letex_unzip"><a href="letex_unzip.html">letex:unzip</a></p></li><li><p class="nav" id="nav_letex_validate-with-rng"><a href="letex_validate-with-rng.html">letex:validate-with-rng</a></p></li><li><p class="nav" id="nav_letex_image-identify"><a href="letex_image-identify.html">letex:image-identify</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">prepend-hub-xml-model.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_letex_prepend-hub-xml-model"><a href="letex_prepend-hub-xml-model.html">letex:prepend-hub-xml-model</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">simple-progress-msg.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_letex_simple-progress-msg"><a href="letex_simple-progress-msg.html">letex:simple-progress-msg</a></p></li><li><p class="nav" id="nav_letex_propagate-caught-error"><a href="letex_propagate-caught-error.html">letex:propagate-caught-error</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">store-debug.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_letex_store-debug"><a href="letex_store-debug.html">letex:store-debug</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_p"><a class="fold pointer">p:…</a> <span class="count">(26)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">xproc-1.0.xpl (library)</a> <span class="count">(26)</span></p><ul><li><p class="nav" id="nav_p_add-attribute"><a href="p_add-attribute.html">p:add-attribute</a></p></li><li><p class="nav" id="nav_p_delete"><a href="p_delete.html">p:delete</a></p></li><li><p class="nav" id="nav_p_directory-list"><a href="p_directory-list.html">p:directory-list</a></p></li><li><p class="nav" id="nav_p_error"><a href="p_error.html">p:error</a></p></li><li><p class="nav" id="nav_p_filter"><a href="p_filter.html">p:filter</a></p></li><li><p class="nav" id="nav_p_http-request"><a href="p_http-request.html">p:http-request</a></p></li><li><p class="nav" id="nav_p_identity"><a href="p_identity.html">p:identity</a></p></li><li><p class="nav" id="nav_p_insert"><a href="p_insert.html">p:insert</a></p></li><li><p class="nav" id="nav_p_load"><a href="p_load.html">p:load</a></p></li><li><p class="nav" id="nav_p_pack"><a href="p_pack.html">p:pack</a></p></li><li><p class="nav" id="nav_p_parameters"><a href="p_parameters.html">p:parameters</a></p></li><li><p class="nav" id="nav_p_rename"><a href="p_rename.html">p:rename</a></p></li><li><p class="nav" id="nav_p_set-attributes"><a href="p_set-attributes.html">p:set-attributes</a></p></li><li><p class="nav" id="nav_p_sink"><a href="p_sink.html">p:sink</a></p></li><li><p class="nav" id="nav_p_split-sequence"><a href="p_split-sequence.html">p:split-sequence</a></p></li><li><p class="nav" id="nav_p_store"><a href="p_store.html">p:store</a></p></li><li><p class="nav" id="nav_p_string-replace"><a href="p_string-replace.html">p:string-replace</a></p></li><li><p class="nav" id="nav_p_unwrap"><a href="p_unwrap.html">p:unwrap</a></p></li><li><p class="nav" id="nav_p_wrap"><a href="p_wrap.html">p:wrap</a></p></li><li><p class="nav" id="nav_p_wrap-sequence"><a href="p_wrap-sequence.html">p:wrap-sequence</a></p></li><li><p class="nav" id="nav_p_xslt"><a href="p_xslt.html">p:xslt</a></p></li><li><p class="nav" id="nav_p_exec"><a href="p_exec.html">p:exec</a></p></li><li><p class="nav" id="nav_p_hash"><a href="p_hash.html">p:hash</a></p></li><li><p class="nav" id="nav_p_uuid"><a href="p_uuid.html">p:uuid</a></p></li><li><p class="nav" id="nav_p_validate-with-relax-ng"><a href="p_validate-with-relax-ng.html">p:validate-with-relax-ng</a></p></li><li><p class="nav" id="nav_p_validate-with-schematron"><a href="p_validate-with-schematron.html">p:validate-with-schematron</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_pos"><a class="fold pointer">pos:…</a> <span class="count">(1)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">library-1.0.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_pos_info"><a href="pos_info.html">pos:info</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_transpect"><a class="fold pointer">transpect:…</a> <span class="count">(7)</span></p><ul><li><p class="nav" id="nav_transpect_patch-svrl"><a href="transpect_patch-svrl.html">transpect:patch-svrl</a></p></li><li><p class="nav" id="nav_transpect_file-uri"><a href="transpect_file-uri.html">transpect:file-uri</a></p></li><li><p class="nav" id="nav_transpect_dynamic-transformation-pipeline"><a href="transpect_dynamic-transformation-pipeline.html">transpect:dynamic-transformation-pipeline</a></p></li><li><p class="nav" id="nav_transpect_errorPI2svrl"><a href="transpect_errorPI2svrl.html">transpect:errorPI2svrl</a></p></li><li><p class="toggle level3"><a class="fold pointer">load-cascaded.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_transpect_load-cascaded"><a href="transpect_load-cascaded.html">transpect:load-cascaded</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">validate-with-schematron.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_transpect_validate-with-schematron"><a href="transpect_validate-with-schematron.html">transpect:validate-with-schematron</a></p></li><li><p class="nav" id="nav_transpect_validate-with-schematron2"><a href="transpect_validate-with-schematron2.html">transpect:validate-with-schematron2</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_trdemo"><a class="fold pointer">trdemo:…</a> <span class="count">(5)</span></p><ul><li><p class="nav" id="nav_trdemo_paths"><a href="trdemo_paths.html">trdemo:paths</a></p></li><li><p class="nav" id="nav_trdemo_convert-input"><a href="trdemo_convert-input.html">trdemo:convert-input</a></p></li><li><p class="nav" id="nav_trdemo_validate"><a href="trdemo_validate.html">trdemo:validate</a></p></li><li><p class="nav" id="nav_trdemo_hub2dbk"><a href="trdemo_hub2dbk.html">trdemo:hub2dbk</a></p></li><li><p class="nav" id="nav_trdemo_epub-convert"><a href="trdemo_epub-convert.html">trdemo:epub-convert</a></p></li></ul></li></ul></li></ul></div><div id="main" class="macroblock"><h2>transpect:file-uri <span class="name" id="step_file-uri">file-uri</span></h2><div class="file-path block"><p class="file-path">xproc-util/file-uri/file-uri.xpl</p><p class="file-path"> Import URI: http://transpect.le-tex.de/xproc-util/file-uri/file-uri.xpl</p></div><div class="documentation block">
    <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">This step accepts either a file system path or a URL in its 'filename' option. It will normalize them so that both a file
      system path and a file: URL are available. If filename starts with http: or https:, the file will be retrieved and stored
      locally. Please note that this retrieval will not work for remote directories.</p>
    <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Its primary uses are</p>
    <ul xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">
      <li>giving users the liberty to either specify a URL or an OS-specific path for input file parameters;</li>
      <li>making XML catalog resolution available to any URI, not just when accessing resources through catalog-enabled methods
        such as <code>doc()</code>;</li>
      <li>if, after optional catalog resolution, the 'filename' URI is still http:/https:, <code>p:http-request</code> will be
        used to store the file locally.</li>
    </ul>
    <h4 xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Examples for 'filename' values</h4>
    <ul xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">
      <li><code>C:/temp/file.docx</code>,</li>
      <li><code>c:\temp\file.docx</code>,</li>
      <li><code>file:/C:/temp/file.docx</code>,</li>
      <li><code>file:///C:/temp/file.docx</code>,</li>
      <li><code>/tmp/file.docx</code>,</li>
      <li><code>subdir/file.docx</code>,</li>
      <li><code>https://github.com/me/myrepo/blob/master/file.docx?raw=true</code></li>
    </ul>
    <h4 xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Relative Paths</h4>
    <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Relative paths will be resolved against the current working directory, which is better than the static base uri most of the
      time but which might not always be what the user wants. It is a good idea to absolutize paths, as in 
      <code>$(readlink -f subdir/file.docx)</code> or <code>$(cygpath -ma subdir/file.docx)</code>.</p>
    <h4 xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">XML Catalogs</h4>
    <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">If a catalog is provided on the catalog port and an <a href="https://subversion.le-tex.de/common/letex-util/xslt-based-catalog-resolver/">XSLT stylesheet for catalog resolution</a> is supplied on the 
      resolver port, http:/https: URIs will be catalog-resolved first, see below.</p>
    <h4 xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Storage Location for HTTP Downloads</h4>
    <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">It is possible to specify a temporary directory in the 'tmpdir' option. By default, it will be the subdir 'tmp' of the
      user’s home directory. The 'tmpdir' option accepts both a file: URL and an OS path, thanks to this normalization step.</p>
    <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Please note that temporary files will not be deleted by this step.</p>
    <h4 xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Unique File Names for HTTP Downloads</h4>
    <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">If the option 'make-unique' is true (which it is by default), the files that are fetched by <code>p:http-request</code>
      will get a random string like <code>_0fa8d348</code> appended to their base name.</p>
    <h4 xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Output format</h4>
    <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">The output is a <code>c:result</code> element with the following attributes:</p>
    <dl xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">
      <dt><code>os-path</code></dt>
      <dd>OS-specific path. This is always present except when there is <code>error-status</code></dd>
      <dt><code>local-href</code></dt>
      <dd>file: URI. This is always present except when there is <code>error-status</code></dd>
      <dt><code>error-status</code></dt>
      <dd>This may only happen if the 'filename' was an HTTP URI and if their was an error retrieving the resource</dd>
      <dt><code>href</code></dt>
      <dd>The post catalog-resolution URI of the resource (if it is an HTTP URI)</dd>
      <dt><code>orig-href</code></dt>
      <dd>The pre catalog-resolution URI of the resource (if different from post catalog)</dd>
      <dt><code>lastpath</code></dt>
      <dd>For ordinary files, the non-directory part including suffix. For directories, the last path component without trailing slash.</dd>
    </dl>
  </div><div class="interface block visualisation"><h3 class="toggle"><a class="pointer">Visualisation</a></h3><p>The pre-creation of this SVG image needs the Graphviz software installed. 
            Please inform your project maintainer.</p></div><div class="interface block input"><h3 class="toggle"><a class="pointer">Input Ports</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Connections</th></tr><tr><td><p class="port-declaration"><span class="name">source</span><span class="flag primary" title="Primary port">Ⓟ</span></p></td><td><div class="documentation block"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Just to prevent that the default readable port will be connected to the catalog or resolver
      ports.</p></div></td><td><ul class="connections"><li><a href="file:///C:/cygwin/home/gerrit/Dev/transpect-demo/trunk/doc/transpectdoc/transpect_file-uri.html#step_d133e491">transpect:file-uri/p:store <span class="name">d133e491</span> result</a></li><li><a href="file:///C:/cygwin/home/gerrit/Dev/transpect-demo/trunk/doc/transpectdoc/transpect_file-uri.html#step_d133e515">transpect:file-uri/p:store <span class="name">d133e515</span> result</a></li><li><a href="file:///C:/cygwin/home/gerrit/Dev/transpect-demo/trunk/doc/transpectdoc/transpect_file-uri.html">transpect:file-uri/c:file <span class="name">file-uri</span> source</a></li><li><a href="file:///C:/cygwin/home/gerrit/Dev/transpect-demo/trunk/doc/transpectdoc/transpect_file-uri.html#step_cwd-uri">transpect:file-uri/transpect:file-uri <span class="name">cwd-uri</span> result</a></li><li><a href="file:///C:/cygwin/home/gerrit/Dev/transpect-demo/trunk/doc/transpectdoc/docx2hub_single-tree.html">docx2hub:single-tree/c:file <span class="name">docx-single-tree</span> source</a></li><li><a href="file:///C:/cygwin/home/gerrit/Dev/transpect-demo/trunk/doc/transpectdoc/epub_convert.html#step_start-msg">epub:convert/letex:simple-progress-msg <span class="name">start-msg</span> result</a></li><li><a href="file:///C:/cygwin/home/gerrit/Dev/transpect-demo/trunk/doc/transpectdoc/css_parse.html">css:parse (in library css.xpl)/c:step-declaration <span class="name">parse</span> source</a></li></ul></td></tr><tr><td><p class="port-declaration"><span class="name">catalog</span></p></td><td><div class="documentation block"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">If it is a </p><code xmlns="" xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">&lt;catalog&gt;</code><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect"> document in the namespace
        </p><code xmlns="" xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">urn:oasis:names:tc:entity:xmlns:xml:catalog</code><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">, it will be used for catalog resolution of URIs that start with
      'http'.</p></div></td><td></td></tr><tr><td><p class="port-declaration"><span class="name">resolver</span></p></td><td><div class="documentation block">
      <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">An XSLT stylesheet that provides the named template <code>resolve</code>. This template takes a parameter
          <code>$uri</code> and produces a document <code>&lt;result unresolved="{$uri}"/&gt;</code>. If the URI could be resolved
        to another URI, the result will take the form <code>&lt;result unresolved="{$uri}"
        resolved="{$resolved-uri}"/&gt;</code>.</p>
      <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">By default, this step only provides trivial (i.e., identity) catalog resolution.</p>
      <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">You have to supply an XSLT-based catalog resolver on the resolver port in order to use catalog resolution. That is
        because native catalog resolution is not available for p:http-request or by XPath function. This means that you can’t
        programmatically decide whether to retrieve a file via <span class="step">p:http-request</span> or use the local file.</p>
      <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">You may use the <a href="https://subversion.le-tex.de/common/letex-util/xslt-based-catalog-resolver/resolve-uri-by-catalog.xsl">repository version</a> of the XSLT-based resolver. However, in order to avoid network traffic, you should consider
        using a local copy. In order to avoid importing it via its absolute or relative file system path, you should use the
        transpect appoach of importing the resolver’s XML catalog via <code>&lt;nextCatalog</code> from your project catalog.
        Then you can import the XSLT-based resolver by its <a href="http://transpect.le-tex.de/xslt-util/xslt-based-catalog-resolver/resolve-uri-by-catalog.xsl">canonical
        URI</a>.</p>
    </div></td><td></td></tr></table></div><div class="interface block output"><h3 class="toggle"><a class="pointer">Output Ports</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Connections</th></tr><tr><td><p class="port-declaration"><span class="name">result</span><span class="flag primary" title="Primary port">Ⓟ</span></p></td><td><div class="documentation block">A c:result document with a local-href and an os-path attribute.</div></td><td>A c:result document with a local-href and an os-path attribute.</td></tr></table></div><div class="interface block option"><h3 class="toggle"><a class="pointer">Options</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Default</th></tr><tr><td><p class="option"><span class="name">filename</span></p></td><td><div class="documentation block"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">A URI or an OS-specific identifier. Relative paths will be resolved against the static-base-uri(). A future
      improvement might use the XSLT-based catalog resolver in order to detect whether a given http: URL will actually resolve
      to a local file.</p></div></td><td><p></p></td></tr><tr><td><p class="option"><span class="name">make-unique</span></p></td><td><div class="documentation block"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Whether to store files retrieved over HTTP with a unique random name in the temp dir.</p></div></td><td><p><span class="default">'true'</span></p></td></tr><tr><td><p class="option"><span class="name">fetch-http</span></p></td><td><div class="documentation block"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Whether to fetch files referenced by URIs matching '^https?:'.</p></div></td><td><p><span class="default">'true'</span></p></td></tr><tr><td><p class="option"><span class="name">tmpdir</span></p></td><td><div class="documentation block"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">URI or OS name of a directory for storing files retrieved via HTTP.</p></div></td><td><p><span class="default">''</span></p></td></tr></table></div><div class="subpipeline block"><h3 class="toggle"><a class="pointer">Subpipeline</a></h3><table><colgroup><col /><col /><col /><col /><col /><col /><col class="name" /><col class="inputs" /><col class="outputs" /><col class="options" /></colgroup><tr><th colspan="7">Step</th><th>Inputs</th><th>Outputs</th><th>Options</th></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_xslt.html">p:xslt</a></span> <span class="name" id="step_catalog-resolve">catalog-resolve</span></p></td><td><dl><dt>stylesheet</dt><dd>
      <p><a href="#step_file-uri_port_resolver">resolver</a> on <a href="#step_file-uri">file-uri</a></p>
    </dd><dt>source</dt><dd>
      <p>p:document<a href=""></a></p>
      <p><a href="#step_file-uri_port_catalog">catalog</a> on <a href="#step_file-uri">file-uri</a></p>
    </dd></dl></td><td><p id="step_catalog-resolve_port_result">result</p></td><td><p><a href="p_xslt.html#option_template-name">template-name</a> = 'resolve'</p></td></tr><tr class="local-end"><td colspan="7"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d133e308">d133e308</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_catalog-resolve_port_result">result</a> on <a href="#step_catalog-resolve">catalog-resolve</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="pos_info.html">pos:info</a></span> <span class="name" id="step_info">info</span></p></td><td></td><td><p id="step_info_port_result">result</p></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_empty-result">empty-result</span></p></td><td><dl><dt>source</dt><dd>
      <pre><code>
 &lt;c:result/&gt;

</code></pre>
    </dd></dl></td><td><p id="step_empty-result_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'cwd'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = if (/*/@file-separator = '/') then replace(/*/@cwd, '\\', '/') else /*/@cwd</p></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_set-attributes.html">p:set-attributes</a></span> <span class="name" id="step_add-orig-href">add-orig-href</span></p>
      <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">If the URL has been catalog-resolved, the original URL will be copied here from the preceding XSLT step, in an
        orig-href attribute. Apart from that, the XSLT step has to prodce an href attribute.</p>
      <p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Please note that despite its name, the @href attribute doesn’t necessarily contain a URI. If $filename is an OS path,
        @href will contain this path.</p>
    </td><td><dl><dt>source</dt><dd><p><a href="#step_empty-result_port_result">result</a> on <a href="#step_empty-result">empty-result</a></p></dd><dt>attributes</dt><dd>
      <p><a href="#step_catalog-resolve_port_result">result</a> on <a href="#step_catalog-resolve">catalog-resolve</a></p>
    </dd></dl></td><td><p id="step_add-orig-href_port_result">result</p></td><td><p><a href="p_set-attributes.html#option_match">match</a> = '/c:result'</p></td></tr><tr class="group"><td rowspan="40"><p class="rotate" title="p:group">p:group <span class="name generated" id="step_d133e338">d133e338</span></p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_catalog-resolved-uri">catalog-resolved-uri</span></p></td><td></td><td></td><td>/c:result/@href</td></tr><tr class="cases"><td rowspan="38"><p class="rotate" title="p:choose">p:choose <span class="name" id="step_analyze-filename">analyze-filename</span></p></td><td colspan="5"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="3"><p class="rotate" title="matches($catalog-resolved-uri, '^file:/')">matches($catalog-resolved-uri, '^file:/')</p></td><td colspan="4"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">file: URI</p></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e349">d133e349</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_file-uri_port_source">source</a> on <a href="#step_file-uri">file-uri</a></p></dd></dl></td><td><p id="step_d133e349_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'local-href'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $catalog-resolved-uri</p></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e354">d133e354</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d133e349_port_result">result</a> on <a href="#step_d133e349">d133e349</a></p></dd></dl></td><td><p id="step_d133e354_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'os-path'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = replace($catalog-resolved-uri, '^file:/+(([a-z]:)/)?', '$2/', 'i')</p></td></tr><tr class="even cond"><td rowspan="3"><p class="rotate" title="matches($catalog-resolved-uri, '^/')">matches($catalog-resolved-uri, '^/')</p></td><td colspan="4"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Unix Filename</p></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e365">d133e365</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_file-uri_port_source">source</a> on <a href="#step_file-uri">file-uri</a></p></dd></dl></td><td><p id="step_d133e365_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'local-href'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = concat('file:', $catalog-resolved-uri)</p></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e370">d133e370</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d133e365_port_result">result</a> on <a href="#step_d133e365">d133e365</a></p></dd></dl></td><td><p id="step_d133e370_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'os-path'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $catalog-resolved-uri</p></td></tr><tr class="odd cond"><td rowspan="3"><p class="rotate" title="matches($catalog-resolved-uri, '^[a-z]:', 'i')">matches($catalog-resolved-uri, '^[a-z]:', 'i')</p></td><td colspan="4"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Windows path, either with forward or backward slashes.</p></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e381">d133e381</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_file-uri_port_source">source</a> on <a href="#step_file-uri">file-uri</a></p></dd></dl></td><td><p id="step_d133e381_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'local-href'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = concat('file:///', replace($catalog-resolved-uri, '\\', '/'))</p></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e386">d133e386</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d133e381_port_result">result</a> on <a href="#step_d133e381">d133e381</a></p></dd></dl></td><td><p id="step_d133e386_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'os-path'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $catalog-resolved-uri</p></td></tr><tr class="even cond"><td rowspan="23"><p class="rotate" title="matches($catalog-resolved-uri, '^https?:') and $fetch-http = 'true'">matches($catalog-resolved-uri, '^https?:') and $fetch-http = 'true'</p></td><td colspan="4"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">HTTP URL. Since there is no system property for a temp dir, store it in the subdir tmp of the user’s
          home dir. Optionally generate a random name.</p></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_uuid.html">p:uuid</a></span> <span class="name" id="step_uuid">uuid</span></p></td><td><dl><dt>source</dt><dd>
            <pre><code>
 &lt;doc uuid=""/&gt;

</code></pre>
          </dd></dl></td><td><p id="step_uuid_port_result">result</p></td><td><p><a href="p_uuid.html#option_match">match</a> = '/*/@uuid'</p></td></tr><tr class="local-end"><td colspan="4"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d133e408">d133e408</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_uuid_port_result">result</a> on <a href="#step_uuid">uuid</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="transpect_file-uri.html">transpect:file-uri</a></span> <span class="name" id="step_tmp-dir">tmp-dir</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_tmp-dir_port_result">result</p></td><td><p><a href="transpect_file-uri.html#option_filename">filename</a> = ($tmpdir[normalize-space()], concat(/c:result/@user-home, '/tmp/'))[1]</p></td></tr><tr class="group"><td rowspan="19"><p class="rotate" title="p:group">p:group <span class="name generated" id="step_d133e418">d133e418</span></p></td><td colspan="3"></td><td></td><td></td><td></td></tr><tr><td colspan="3"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_tmp-dir-href">tmp-dir-href</span></p></td><td><p><a href="#step_tmp-dir_port_result">result</a> on <a href="#step_tmp-dir">tmp-dir</a></p></td><td></td><td>/c:result/@local-href</td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_local-href">local-href</span></p></td><td><dl><dt>source</dt><dd>
              <p><a href="#step_uuid_port_result">result</a> on <a href="#step_uuid">uuid</a></p>
            </dd></dl></td><td><p id="step_local-href_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'local-href'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = concat(                             $tmp-dir-href,                              replace(                               replace($catalog-resolved-uri, '^.+/', ''),                               '(.+?)([.?#].+)?',                                '$1'                             ),                             if ($make-unique = 'true') then concat('_', substring(/*/@uuid, 1, 8)) else '',                             replace(replace(replace($catalog-resolved-uri, '^.+/', ''), '^[^?#.]+', ''), '[?#].*$', '')                           )</p></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d133e438">d133e438</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_local-href_port_result">result</a> on <a href="#step_local-href">local-href</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d133e440">d133e440</span></p></td><td><dl><dt>source</dt><dd>
              <pre><code>
 &lt;c:request method="GET" detailed="true"/&gt;

</code></pre>
            </dd></dl></td><td><p id="step_d133e440_port_result">result</p></td><td></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e451">d133e451</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d133e440_port_result">result</a> on <a href="#step_d133e440">d133e440</a></p></dd></dl></td><td><p id="step_d133e451_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/c:request'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'href'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $catalog-resolved-uri</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="p_http-request.html">p:http-request</a></span> <span class="name" id="step_http-request">http-request</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d133e451_port_result">result</a> on <a href="#step_d133e451">d133e451</a></p></dd></dl></td><td><p id="step_http-request_port_result">result</p></td><td></td></tr><tr class="cases"><td rowspan="11"><p class="rotate" title="p:choose">p:choose <span class="name" id="step_store-http-resource">store-http-resource</span></p></td><td colspan="2"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="4"><p class="rotate" title="not(starts-with(/c:response/@status, '2'))">not(starts-with(/c:response/@status, '2'))</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="cx_message.html">cx:message</a></span> <span class="name generated" id="step_d133e463">d133e463</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_http-request_port_result">result</a> on <a href="#step_http-request">http-request</a></p></dd></dl></td><td><p id="step_d133e463_port_result">result</p></td><td><p><a href="cx_message.html#option_message">message</a> = concat('Cannot retrieve ', $catalog-resolved-uri, '. Status: ', /c:response/@status)</p></td></tr><tr class="local-end"><td colspan="1"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d133e468">d133e468</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d133e463_port_result">result</a> on <a href="#step_d133e463">d133e463</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e470">d133e470</span></p></td><td><dl><dt>source</dt><dd>
                  <pre><code>
 &lt;c:result/&gt;

</code></pre>
                </dd></dl></td><td><p id="step_d133e470_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'error-status'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/c:result'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = /c:response/@status</p></td></tr><tr class="even cond"><td rowspan="3"><p class="rotate" title="/c:response/c:body/(.[normalize-space(.)] | c:data)">/c:response/c:body/(.[normalize-space(.)] | c:data)</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="p_store.html">p:store</a></span> <span class="name generated" id="step_d133e491">d133e491</span></p></td><td><dl><dt>source</dt><dd>
                  <p><a href="#step_http-request_port_result">result</a> on <a href="#step_http-request">http-request</a></p>
                </dd></dl></td><td><p id="step_d133e491_port_result">result</p></td><td><p><a href="p_store.html#option_href">href</a> = /doc/@local-href</p></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="transpect_file-uri.html">transpect:file-uri</a></span> <span class="name" id="step_http-to-local-result_binary">http-to-local-result_binary</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d133e491_port_result">result</a> on <a href="#step_d133e491">d133e491</a></p></dd></dl></td><td><p id="step_http-to-local-result_binary_port_result">result</p></td><td><p><a href="transpect_file-uri.html#option_filename">filename</a> = /doc/@local-href</p></td></tr><tr class="odd cond"><td rowspan="3"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="p_store.html">p:store</a></span> <span class="name generated" id="step_d133e515">d133e515</span></p></td><td><dl><dt>source</dt><dd>
                  <p><a href="#step_http-request_port_result">result</a> on <a href="#step_http-request">http-request</a></p>
                </dd></dl></td><td><p id="step_d133e515_port_result">result</p></td><td><p><a href="p_store.html#option_omit-xml-declaration">omit-xml-declaration</a> = 'false'</p><p><a href="p_store.html#option_href">href</a> = /doc/@local-href</p></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="transpect_file-uri.html">transpect:file-uri</a></span> <span class="name" id="step_http-to-local-result_xml">http-to-local-result_xml</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d133e515_port_result">result</a> on <a href="#step_d133e515">d133e515</a></p></dd></dl></td><td><p id="step_http-to-local-result_xml_port_result">result</p></td><td><p><a href="transpect_file-uri.html#option_filename">filename</a> = /doc/@local-href</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e538">d133e538</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d133e538_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/c:result'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'href'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $catalog-resolved-uri</p></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="matches($catalog-resolved-uri, '^\\\\')">matches($catalog-resolved-uri, '^\\\\')</p></td><td colspan="4"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Windows UNC path. Not supported yet.</p></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d133e550">d133e550</span></p></td><td><dl><dt>source</dt><dd>
            <pre><code>
 &lt;c:result local-href=""/&gt;

</code></pre>
          </dd></dl></td><td><p id="step_d133e550_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'os-path'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $catalog-resolved-uri</p></td></tr><tr class="even cond"><td rowspan="3"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="4"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pos="http://exproc.org/proposed/steps/os" xmlns:letex="http://www.le-tex.de/namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:transpect="http://www.le-tex.de/namespace/transpect">Other protocol or relative filename. We don’t support other protocols/notations, so we assume it to be
          a relative path.</p></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="transpect_file-uri.html">transpect:file-uri</a></span> <span class="name" id="step_cwd-uri">cwd-uri</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_file-uri_port_source">source</a> on <a href="#step_file-uri">file-uri</a></p></dd></dl></td><td><p id="step_cwd-uri_port_result">result</p></td><td><p><a href="transpect_file-uri.html#option_filename">filename</a> = concat(/c:result/@cwd, '/')</p></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="transpect_file-uri.html">transpect:file-uri</a></span> <span class="name" id="step_resolved-uri">resolved-uri</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_cwd-uri_port_result">result</a> on <a href="#step_cwd-uri">cwd-uri</a></p></dd></dl></td><td><p id="step_resolved-uri_port_result">result</p></td><td><p><a href="transpect_file-uri.html#option_filename">filename</a> = resolve-uri($catalog-resolved-uri, /c:result/@local-href)</p></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_lastpath">lastpath</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_lastpath_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'lastpath'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = replace(/*/@local-href, '^.+/([^/]+)/*$', '$1')</p></td></tr></table></div><div class="interface block use"><h3 class="toggle"><a class="pointer">Used by</a></h3><ul><li><p class="nav" id="nav_css_parse">declare-step <a href="css_parse.html">css:parse (in library css.xpl)</a></p></li><li><p class="nav" id="nav_docx2hub_single-tree">declare-step <a href="docx2hub_single-tree.html">docx2hub:single-tree</a></p></li><li><p class="nav" id="nav_epub_convert">declare-step <a href="epub_convert.html">epub:convert</a></p></li><li><p class="nav" id="nav_idml2xml_single-doc">declare-step <a href="idml2xml_single-doc.html">idml2xml:single-doc</a></p></li><li><p class="nav" id="nav_transpect_file-uri">declare-step <a href="transpect_file-uri.html">transpect:file-uri</a></p></li><li><p class="nav" id="nav_transpect_paths">declare-step <a href="transpect_paths.html">transpect:paths</a></p></li></ul></div></div></div></div></body></html>